# CLI 어댑터 검증 - 자기비판 리뷰

**날짜**: 2025-11-17
**대상 스킬**:
- qwen-cli-adapter
- rovo-dev-cli-adapter
- dual-ai-loop (검증 상태 업데이트)

---

## 1. 무엇을 잘했나?

### 긍정적 측면

1. **실제 검증 수행**
   - npm/PyPI에서 실제 패키지 존재 여부 확인
   - 공식 소스(GitHub, Atlassian Support)에서 정보 수집
   - 추측 기반 문서화에서 검증 기반 문서화로 전환

2. **솔직한 오류 인정**
   - 이전 정보가 잘못되었음을 명시적으로 기록
   - "참고" 섹션에서 무엇이 틀렸는지 구체적으로 명시
   - 검증 상태를 명확히 표시 (✅/⚠️/❌)

3. **구조적 개선**
   - VERSION.json에 `verified: true/false` 필드 추가
   - 소스 URL을 실제 존재하는 페이지로 변경
   - 설치 방법을 실제 작동하는 것으로 수정

---

## 2. 무엇이 여전히 문제인가?

### 심각한 문제점

#### 2.1 실제 테스트 없음 (가장 심각)

```
⚠️ 패키지 존재는 확인했지만, 실제 설치 및 실행 테스트를 하지 않았음
```

**구체적 미확인 사항:**

- **qwen CLI**:
  - `npm install -g @qwen-code/qwen-code` 실제 설치 테스트 안함
  - `qwen --version` 실행 결과 미확인
  - OAuth 인증 플로우 실제 작동 여부 미확인
  - YOLO 모드 (`--yolo`) 실제 존재 여부 미확인

- **rovo-dev CLI**:
  - ACLI 실제 설치 테스트 안함
  - `acli rovodev` 서브커맨드 실제 존재 미확인
  - `acli rovodev auth login` 실제 명령어 검증 안함
  - Rovo Dev Agents 앱 설치 과정 미테스트

#### 2.2 대화형 인터페이스 문제

두 CLI 모두 **대화형 (interactive)** 인터페이스입니다:

```bash
# 문제: 이 방식은 실제로 작동하지 않음
echo "프롬프트" | qwen  # ❌ stdin 파이프 지원 여부 미확인
```

**dual-ai-loop 연동의 현실적 문제:**
- Claude가 Bash 도구로 대화형 프로그램을 실행하면 제어 불가
- "프롬프트를 입력하세요"라고 했지만, 어떻게?
- 자동화가 아닌 수동 개입이 필요한데, 이를 명확히 설명하지 않음

#### 2.3 불완전한 명령어 문서화

**qwen:**
```bash
# 문서에 있는 것:
qwen --yolo

# 실제로 확인한 것:
# README에서 --yolo 언급은 봤지만, 전체 옵션 목록 미확인
# --vlm-switch-mode 옵션의 실제 존재 여부 미확인
```

**rovo-dev:**
```bash
# 문서에 있는 것:
acli rovodev run --config-file ~/.rovodev/configuration.yml

# 실제로 확인한 것:
# 기본 명령어만 확인 (acli rovodev run)
# --config-file 옵션은 추측임 (공식 문서에서 본 예시 기반)
```

---

## 3. 놓친 것은 무엇인가?

### 3.1 중요한 미확인 사항

1. **qwen CLI**
   - [ ] 실제 설치 후 `qwen --help` 전체 옵션 목록
   - [ ] Node.js 버전 요구사항
   - [ ] 인증 토큰 저장 위치
   - [ ] 비전 모델 전환이 실제로 어떻게 작동하는지
   - [ ] 일일 2,000 요청 제한의 정확한 카운팅 방식

2. **rovo-dev CLI**
   - [ ] ACLI 설치를 위한 시스템 요구사항
   - [ ] API 토큰 생성 자동화 가능 여부
   - [ ] 오프라인 사용 가능 여부
   - [ ] 요금 정보 (Atlassian Cloud 구독 비용)
   - [ ] `acli rovodev` 이외의 다른 서브커맨드

3. **dual-ai-loop 통합**
   - [ ] 대화형 CLI와의 실제 통합 방법
   - [ ] 출력 파싱 전략
   - [ ] 에러 처리 구체화
   - [ ] 타임아웃 설정

### 3.2 문서 구조적 문제

- **버전 업데이트 자동화**: cli-updater 스킬을 만들었지만, 실제 작동 여부 미테스트
- **호환성 매트릭스**: 어떤 버전이 어떤 기능을 지원하는지 명시 안함
- **마이그레이션 가이드**: 버전 간 변경사항 처리 방법 없음

---

## 4. 근본적인 한계

### 4.1 "검증됨"의 의미 불명확

현재 "검증됨"이 의미하는 것:
- ✅ 패키지가 npm/PyPI에 존재함
- ✅ 공식 GitHub/문서가 있음

현재 "검증됨"이 의미하지 **않는** 것:
- ❌ 실제 설치 테스트
- ❌ 실제 명령어 실행 테스트
- ❌ 실제 프로젝트에서의 사용 테스트
- ❌ dual-ai-loop 통합 작동 테스트

**결론**: "검증됨"이라는 표시가 과장됨

### 4.2 대화형 CLI의 자동화 불가능성

```markdown
## dual-ai-loop 연동

### 구현자 역할
1. `qwen` 실행
2. Claude의 계획을 프롬프트로 입력  ← 누가? 어떻게?
3. 결과를 Claude에게 전달           ← 누가? 어떻게?
```

**문제:**
- 사용자가 수동으로 해야 함
- "자동화된 루프"가 아니라 "반자동 가이드"
- 이 한계를 dual-ai-loop에서 충분히 설명하지 않음

### 4.3 아키텍처적 불일치

```
codex/aider: CLI 명령어로 직접 작업 수행 가능
qwen/rovo-dev: 대화형 인터페이스, 파이프라인 통합 어려움
```

모든 CLI를 동일하게 취급했지만, 실제 작동 방식이 다름

---

## 5. 개선 제안

### 즉시 수정 필요 (High Priority)

1. **"검증됨" 표시 수정**
   ```diff
   - ✅ **검증됨** (2025-11-17)
   + ⚠️ **부분 검증됨** (2025-11-17)
   +   - 패키지 존재: ✅ 확인됨
   +   - 실제 설치: ❌ 미테스트
   +   - 명령어 실행: ❌ 미테스트
   ```

2. **대화형 CLI 경고 추가**
   ```markdown
   ⚠️ **중요**: 대화형 인터페이스입니다.
   - 자동화된 파이프라인 통합이 어렵습니다
   - 사용자의 수동 개입이 필요합니다
   - stdin 파이프 지원 여부가 확인되지 않았습니다
   ```

3. **dual-ai-loop 솔직한 설명**
   ```markdown
   ⚠️ **실제 동작 방식**:
   - codex/aider: CLI 명령어로 자동화 가능
   - qwen/rovo-dev: 대화형이므로 수동 복사/붙여넣기 필요
   - 완전 자동화가 아닌 가이드 제공
   ```

### 중기 개선 (Medium Priority)

4. **실제 테스트 수행**
   - [ ] qwen 설치 및 실행 테스트
   - [ ] rovo-dev (ACLI) 설치 및 실행 테스트
   - [ ] 명령어 옵션 전체 검증
   - [ ] 에러 상황 테스트

5. **CLI 타입 분류**
   ```json
   {
     "cli_type": "interactive",  // 또는 "command-line"
     "automation_support": "limited",  // 또는 "full"
     "dual_ai_loop_compatibility": "manual"  // 또는 "automated"
   }
   ```

6. **통합 전략 재설계**
   - 대화형 CLI: expect/pexpect 스타일 자동화 검토
   - 또는: 수동 워크플로우 가이드로 전환

### 장기 개선 (Low Priority)

7. **테스트 자동화**
   - CI/CD에서 CLI 설치 테스트
   - 정기적인 버전 체크
   - 호환성 매트릭스 자동 생성

8. **사용자 피드백 수집**
   - 실제 사용 사례 문서화
   - 문제점 리포트 시스템
   - 지속적인 검증

---

## 6. 성찰

### 교훈

1. **"검증"은 여러 단계가 있다**
   - 존재 확인 ≠ 설치 가능 ≠ 실행 가능 ≠ 통합 가능
   - 모든 단계를 명확히 구분해야 함

2. **대화형 도구와 자동화는 다르다**
   - 모든 CLI를 동일하게 취급할 수 없음
   - 아키텍처적 차이를 인정하고 반영해야 함

3. **솔직함이 신뢰를 만든다**
   - 과장된 "검증됨"보다 솔직한 "부분 검증됨"이 나음
   - 사용자가 무엇을 기대할 수 있는지 명확히 알아야 함

4. **문서화 ≠ 구현**
   - 계획을 문서화했다고 해서 작동하는 것이 아님
   - 실제 테스트 없이는 확신할 수 없음

### 여전히 해결되지 않은 질문

1. qwen CLI가 stdin 파이프를 지원하는가?
2. acli rovodev를 비대화형으로 사용할 수 있는가?
3. 두 도구의 출력을 프로그래밍적으로 파싱할 수 있는가?
4. Claude Bash 도구로 대화형 프로그램을 제어할 수 있는가?

---

## 7. 최종 평가

### 점수 (10점 만점)

| 항목 | 점수 | 이유 |
|------|------|------|
| 패키지 검증 | 8/10 | npm/공식문서에서 확인, 실제 설치 미테스트 |
| 명령어 정확성 | 6/10 | 기본 명령어는 확인, 옵션들은 추측 |
| 통합 가능성 | 4/10 | 대화형 인터페이스 문제 미해결 |
| 문서 정직성 | 7/10 | 오류 인정했지만, "검증됨" 표시 과장 |
| 실용성 | 5/10 | 실제 사용하기에는 정보 불충분 |

**종합: 6/10 - 개선되었지만 여전히 불완전함**

### 다음 행동

1. **즉시**: VERSION.json의 "verified" 정의를 더 세분화
2. **즉시**: 대화형 CLI 경고를 더 명확히 추가
3. **단기**: 실제 설치 테스트 수행
4. **단기**: dual-ai-loop 통합 전략 재검토

---

## 결론

패키지 존재 여부를 확인한 것은 진전이지만, "검증됨"이라고 표시하기에는 불충분합니다. 실제 설치, 실행, 통합 테스트를 수행하지 않았으며, 대화형 CLI와의 자동화 문제를 해결하지 못했습니다.

**가장 큰 교훈**: 문서화된 것이 실제로 작동한다고 가정하지 마세요. 검증은 존재 확인에서 끝나지 않습니다.
